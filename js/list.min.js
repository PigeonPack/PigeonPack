jQuery.s()(document).ready(function(a){function e(){a('table#pigeonpack_list_new_subscriber_table input[type="text"]').c(function(){a(this).a("")})}var f='<img class="add_option" src="'+pigeonpack_list_object.g+'/images/plus-16x16.png" /> <img class="remove_option" src="'+pigeonpack_list_object.g+'/images/minus-16x16.png" />';a("div#add_list_field").b("click",function(){a("div#list_field_types").toggle()});a("input#add_pigeonpack_subscriber").b("click",function(){var b=!1;a("table#pigeonpack_list_new_subscriber_table input.required").c(function(){""===
a(this).a()&&(a(this).j("error"),b=!0)});if(!b){var c={action:"add_pigeonpack_subscriber",data:a("table#pigeonpack_list_new_subscriber_table input").i(),list_id:a("input#post_ID").a(),subscriber_status:"subscribed",_wpnonce:a("input#pigeonpack_list_nonce").a()};a.e(ajaxurl,c,function(b){results=a.h(b);a("tr#no_susbcribers").remove();b=0===a("table#pigeonpack_list_subscriber_table > tbody > tr").length%2?"even":"odd";a("table#pigeonpack_list_subscriber_table > tbody:last").append('<tr id="subscriber-'+
results[0]+'" class="'+b+'">'+results[1]+"</tr>")});e()}});a("table#pigeonpack_list_new_subscriber_table input.required").focus(function(){a(this).u("error")});a("input.add-field-type").b("click",function(){var b=a("table#pigeonpack_list_fields_table > tbody > tr").length,c=a("input[type=hidden].pigeonpack_field_static_merge").r().a();c++;var d=0===b%2?"even":"odd",g='<input type="text" name="pigeonpack_field_label['+b+']" value="Untitled" />';if("Radio Button"===a(this).a()||"Drop Down"===a(this).a())g=
g+'<br /><ul><li><input type="text" name="pigeonpack_field_choice['+b+'][]" value="First Choice" /> '+f+'</li><li><input type="text" name="pigeonpack_field_choice['+b+'][]" value="Second Choice" /> '+f+'</li><li><input type="text" name="pigeonpack_field_choice['+b+'][]" value="Third Choice" /> '+f+"</li></ul>";b='<tr class="'+d+'"><td>'+g+"</td><td>"+a(this).a().toLowerCase()+'<input type="hidden" name="pigeonpack_field_type['+b+']" value="'+a(this).a().toLowerCase()+'" /></td><td><input type="checkbox" name="pigeonpack_field_require['+
b+']" /></td><td>{{<input type="text" class="pigeonpack-medium-text" name="pigeonpack_field_merge['+b+']" value="MERGE'+c+'" />}} or {{MERGE'+c+'}}<input type="hidden" class="pigeonpack_field_static_merge" name="pigeonpack_field_static_merge['+b+']" value="'+c+'" /></td><td><img class="pigeonpack_delete_field" src="'+pigeonpack_list_object.g+'/images/delete-16x16.png" /></td></tr>';a("table#pigeonpack_list_fields_table > tbody:last").append(b)});a("img.pigeonpack_delete_field").b("click",function(){confirm("Are you sure you want to delete this field?")&&
a(this).d("tr").remove()});a("img.add_option").b("click",function(){var b=a(this);b.d("li").n().q(b.d("li"))});a("img.remove_option").b("click",function(){1<a(this).parent().t("ul").children("li").length?a(this).d("li").remove():alert("Error: you must have at least one option.")});a("input.field-type-date").o({l:!0,m:!0,v:"c-120:+10"});a("input.edit-subscriber").b("click",function(){a("div#add_new_subscriber_button").f();a("div#update_subscriber_button").show();var b={action:"edit_pigeonpack_subscriber",
subscriber_id:a(this).k("subscriber_id"),_wpnonce:a("input#pigeonpack_list_nonce").a()};a("input#update_pigeonpack_subscriber_id").a(b.subscriber_id);a.e(ajaxurl,b,function(b){results=a.h(b);e();a.c(results,function(b,c){a('input[name="'+b+'"]').a(c)});a("select[name=pigeonpack_email_format]").a(results.email_format)})});a("input#update_pigeonpack_subscriber").b("click",function(){var b={action:"update_pigeonpack_subscriber",data:a("table#pigeonpack_list_new_subscriber_table input").i(),list_id:a("input#post_ID").a(),
subscriber_id:a("input#update_pigeonpack_subscriber_id").a(),_wpnonce:a("input#pigeonpack_list_nonce").a()};a.e(ajaxurl,b,function(c){a("div#add_new_subscriber_button").show();a("div#update_subscriber_button").f();a("table#pigeonpack_list_subscriber_table tr#subscriber-"+b.subscriber_id).p(c)});e()});a("input#cancel_update_pigeonpack_subscriber").b("click",function(){a("div#add_new_subscriber_button").show();a("div#update_subscriber_button").f();e()});a("input#delete_pigeonpack_subscribers").b("click",
function(){if(1===a('input[name="pigeonpack_list_delete[]"]:checked').length)var b="this",c="";else b="these",c="s";if(confirm("Are you sure you want to delete "+b+" subscriber"+c+"?")){var d=[];a('input[name="pigeonpack_list_delete[]"]:checked').c(function(){d[d.length]=a(this).a()});b={action:"delete_pigeonpack_subscribers",subscriber_ids:d,list_id:a("input#post_ID").a(),_wpnonce:a("input#pigeonpack_list_nonce").a()};a.e(ajaxurl,b,function(b){0<parseInt(b)&&a.c(d,function(b,c){a("tr#subscriber-"+
c).remove()})})}})});